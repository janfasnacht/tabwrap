openapi: 3.0.3
info:
  title: TeX Table Compiler API (Internal Use)
  description: Internal API for compiling tabular `.tex` files.
  version: 1.0.0
  contact:
    name: Jan
    email: jan@example.com

servers:
  - url: https://your-internal-api.com
    description: Production Server (Internal Use)

paths:
  /api/health:
    get:
      summary: Health Check
      description: Check if the API is running.
      responses:
        "200":
          description: API is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "healthy"

  /api/compile:
    post:
      summary: Compile TeX Table
      description: Upload a `.tex` file and compile it into PDF or PNG.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: The `.tex` file to compile.
                packages:
                  type: string
                  description: "Additional LaTeX packages (comma-separated)."
                landscape:
                  type: boolean
                  description: "Render in landscape mode."
                  example: false
                no_rescale:
                  type: boolean
                  description: "Disable automatic rescaling."
                  example: false
                show_filename:
                  type: boolean
                  description: "Show filename in the compiled output."
                  example: false
                png:
                  type: boolean
                  description: "Output as PNG instead of PDF."
                  example: false
                combine_pdf:
                  type: boolean
                  description: "Combine multiple pages into one PDF."
                  example: false
      responses:
        "200":
          description: Successfully compiled file
          content:
            application/pdf:
              schema:
                type: string
                format: binary
                description: Compiled PDF file.
            image/png:
              schema:
                type: string
                format: binary
                description: Compiled PNG file.
        "400":
          description: Bad request (e.g., invalid file type, missing file)
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Invalid file type"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Compilation failed due to server error"

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key

security:
  - ApiKeyAuth: []
